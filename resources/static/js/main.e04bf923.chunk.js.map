{"version":3,"sources":["helper/Constant.js","api/Api.js","page/StrapiConfigWarning.js","App.js","custom-element/et-app.js"],"names":["STRAPI_BASE_URL_KEY","EntKcToken","process","STRAPI_TOKEN","getTemplateById","templateId","a","axios","get","addAuthorizationRequestConfig","data","getTemplates","templateIds","templateData","filtered","filter","temp","indexOf","id","getContents","contentName","contentIds","length","console","error","fetchStrapiBaseUrl","strapiUrl","apiendpoints","map","el","all","endpoint","item","filterContentByQuery","fieldName","searchQuery","finaldata","results","getDefaultOptions","defaultBearer","token","window","entando","keycloak","authenticated","localStorage","getItem","headers","Authorization","config","defaultOptions","getStrapiConfigurations","then","res","catch","e","result","errorCheck","checkIfUrlExists","url","head","strapiBaseUrl","isError","baseUrl","status","setItem","hasOwnProperty","toJSON","name","StrapiConfigWarning","className","href","target","bsStyle","onClick","location","reload","velocityjs","require","App","contentIdsAndTemplateIds","saveQueryDetails","colLabelName","useState","htmlCode","setHtmlCode","decodeURI","CID_TID","fetchMultiSelect","cid_tid_obj","domain","getTemplateData","contentId","getContentsData","mappingOfDataWithTemplate","fetchBySaveQuery","queryDetails","JSON","parse","searchTerm","filteredContent","template","finalHtml","content","updateImgUrl","render","contentShape","Object","keys","finalTemplate","contentIdAndTemplateId","filterContent","filterTemplate","key","i","Array","isArray","useEffect","html","idx","dangerouslySetInnerHTML","__html","ATTRIBUTES","WidgetElement","getStrapiConfiguration","removeItem","oldValue","newValue","values","includes","Error","this","mountPoint","document","createElement","appendChild","getAttribute","ReactDOM","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.e04bf923.chunk.js","sourcesContent":["export const BTN_RELOAD_PAGE = 'Reload Page';\nexport const STRAPI_BASE_URL_KEY = 'STRAPI_CONFIG';\nexport const STRAPI_CONFIG_NOT_AVAIL = 'Strapi configuration not available';\nexport const STRAPI_CONTENT_MANAGER_URI = '/admin/content-manager';\nexport const STRAPI_URL = 'http://20.113.131.137:1337'","import axios from 'axios';\nimport { STRAPI_BASE_URL_KEY } from '../helper/Constant';\n\nconst apiEndPoint = `${process.env.REACT_APP_PUBLIC_API_URL}/template/searchby/`;\nconst EntKcToken = 'EntKcToken';\n\nconst STRAPI_TOKEN = {\n    'Authorization': `Bearer ${process.env.REACT_APP_LOCAL_STRAPI_TOKEN}`\n}\n\nexport const getTemplate = async (searchby = 'code', searchTerm) => {\n    return await axios.get(`${apiEndPoint}${searchby}/${searchTerm}`,addAuthorizationRequestConfig({}))\n}\n\n/**\n * getTemplateById Search Template By Id.\n * @param {*} templateId : TemplateId.\n * @returns \n */\nexport const getTemplateById = async (templateId) => {\n    const { data } = await axios.get(`${process.env.REACT_APP_PUBLIC_API_URL}/template/${templateId}`, addAuthorizationRequestConfig({}));\n    return data;\n}\n\n/**\n * getTemplate Get all templates.\n * @param {*} templateId : TemplateId.\n * @returns\n */\nexport const getTemplates = async (templateIds) => {\n    const { data: templateData } = await axios.get(`${process.env.REACT_APP_PUBLIC_API_URL}/template/`, addAuthorizationRequestConfig({}));\n    const filtered = templateData.filter(temp => {\n        return templateIds.indexOf(temp.id + \"\") > -1\n    });\n    return filtered\n}\n\n/**\n * getContentById Search Content By Id.\n * @param {*} contentType\n * @param {*} contentId\n * @returns\n */\n export const getContentById = async (contentName, contentId) => {\n    if (!contentName || !contentId) console.error(contentName, contentId);\n    const url = `${await fetchStrapiBaseUrl()}/content-manager/collection-types/api::${contentName}.${contentName}/${contentId}`;\n    const { data } = await axios.get(url, addAuthorizationRequestConfig({}, EntKcToken))\n\n    return data;\n}\n\n/**\n * getContents get all contents.\n * @param {*} contentType\n * @param {*} contentId\n * @returns\n */\nexport const getContents = async (contentName, contentIds) => {\n    if (!contentName && !contentIds.length) console.error(contentName);\n    const strapiUrl = await fetchStrapiBaseUrl();\n    const apiendpoints = contentIds.map(el => `${strapiUrl}/content-manager/collection-types/api::${contentName}.${contentName}/${el}`);\n    const data = await axios.all(apiendpoints.map((endpoint) => axios.get(endpoint, addAuthorizationRequestConfig({}, EntKcToken))));\n    return data.map((item) => {\n        return item.data;\n    });\n}\n\nexport const filterContentByQuery = async (contentName, fieldName, searchQuery) => {\n    let finaldata = null;\n    // Passing page size as 100 due to strapi restriction.\n    // Getting searched data.\n    const { data: { results } } = await axios.get(\n        `${await fetchStrapiBaseUrl()}/content-manager/collection-types/api::${contentName}.${contentName}?page=1&pageSize=100&sort=createdAt:DESC&filters[${fieldName}][$containsi]=${searchQuery}`,\n        addAuthorizationRequestConfig({}, EntKcToken)\n    );\n    if (results) {\n        const strapiUrl = await fetchStrapiBaseUrl();\n        finaldata = await axios.all(results.map(el => el.id).map(id => axios.get(\n            `${strapiUrl}/content-manager/collection-types/api::${contentName}.${contentName}/${id}`,\n            addAuthorizationRequestConfig({}, EntKcToken))));\n    }\n    return finaldata.length ? finaldata.map(data => data.data) : [];\n}\n\nconst getKeycloakToken = () => {\n    // return '';\n    if (window && window.entando && window.entando.keycloak && window.entando.keycloak.authenticated) {\n        return window.entando.keycloak.token\n    } else {\n        return localStorage.getItem('token');\n    }\n}\n\nconst getDefaultOptions = (defaultBearer) => {\n    const token = getKeycloakToken()\n    if (!token) {\n        //Below if condition is to run the strapi API in local\n        if (defaultBearer === EntKcToken) {\n            return {\n                headers: STRAPI_TOKEN\n            }\n        } else {\n            return {}\n        }\n    }\n    // logic to add token for both strapi and MS api\n    return {\n        headers: {\n            Authorization: `${defaultBearer} ${token}`,\n        },\n    }\n}\n\n// Get authorization tokens\nexport const addAuthorizationRequestConfig = (config = {}, defaultBearer = 'Bearer') => {\n    let defaultOptions = getDefaultOptions(defaultBearer);\n    return {\n        ...config,\n        ...defaultOptions\n    }\n}\n\n/**\n * Get strapi configurations\n * @returns\n */\n export const getStrapiConfigurations = async () => {\n    const result = await axios.get(process.env.REACT_APP_STRAPI_CONFIG_BE_URL)\n        .then((res) => {\n            return res;\n        }).catch((e) => {\n            return e;\n        });\n    return errorCheck(result);\n}\n\n/**\n * Check if the given url is available\n * @param {*} url \n * @returns \n */\nexport const checkIfUrlExists = async (url) => {\n    const result = await axios.head(url)\n        .then((res) => {\n            return res;\n        }).catch((e) => {\n            return e;\n        });\n    return errorCheck(result);\n}\n\n/**\n *  Get strapi configuration from local storage\n * @returns\n */\nexport const fetchStrapiBaseUrl = async () => {\n    const strapiBaseUrl = localStorage.getItem(STRAPI_BASE_URL_KEY)\n    if (!strapiBaseUrl) {\n        const { data, isError } = await getStrapiConfigurations();\n        if (!isError && data && data.data && data.data.baseUrl) {\n            const result = await checkIfUrlExists(data.data.baseUrl);\n            if (result && result.data && result.data.status === 200 && !result.isError) {\n                localStorage.setItem(STRAPI_BASE_URL_KEY, data.data.baseUrl);\n                return data.data.baseUrl;\n            }\n        }\n    }\n    return strapiBaseUrl;\n}\n\nconst errorCheck = (data) => {\n    let isError = false\n    if (data.hasOwnProperty(\"toJSON\") && data.toJSON().name === \"Error\") {\n        isError = true\n    }\n    return {\n        data,\n        isError,\n    }\n}\n\n//To update the build","import React from 'react';\nimport { BTN_RELOAD_PAGE, STRAPI_URL } from '../helper/Constant';\nexport default function StrapiConfigWarning() {\n    return (\n        <div className=\"msg-top well\">\n            <div>\n                <div><strong><span className=\"pficon pficon-warning-triangle-o\"></span> {STRAPI_URL} can't be reached.\n                    Please click <a href={process.env.REACT_APP_STRAPI_CONFIG_FE_URL} target=\"_blank\">here</a> to configure it.</strong>\n                </div>\n            </div>\n            <div className=\"mt-2\">\n                <button bsStyle=\"primary\" onClick={() => window.location.reload()}>\n                    {BTN_RELOAD_PAGE}\n                </button>\n            </div>\n        </div>\n    )\n}","import React, { useEffect, useState } from 'react';\nimport { fetchStrapiBaseUrl, filterContentByQuery, getContents, getTemplateById, getTemplates } from './api/Api';\nimport './app.css';\nimport { STRAPI_BASE_URL_KEY } from './helper/Constant';\nimport StrapiConfigWarning from './page/StrapiConfigWarning';\nvar velocityjs = require(\"velocityjs\");\n\nfunction App({ contentName, contentIdsAndTemplateIds, saveQueryDetails, colLabelName }) {\n    const [htmlCode, setHtmlCode] = useState(null);\n    const [CID_TID, set_CID_TID] = useState(decodeURI(contentIdsAndTemplateIds));\n\n    useEffect(async () => {\n        const cid_tid_obj = CID_TID.length && JSON.parse(CID_TID);\n        if (contentName) {\n            // if (saveQueryDetails && colLabelName) {\n            if (saveQueryDetails) {\n                await fetchBySaveQuery();\n            }\n            if (cid_tid_obj) {\n                await fetchMultiSelect(cid_tid_obj);\n            }\n        }\n    }, []);\n\n    async function fetchMultiSelect(cid_tid_obj) {\n        const domain = await fetchStrapiBaseUrl();\n        const getTemplateData = await getTemplates(cid_tid_obj.map(el => el.templateId));\n        const getContentsData = await getContents(contentName, cid_tid_obj.map(el => el.contentId));\n        mappingOfDataWithTemplate(getTemplateData, getContentsData, cid_tid_obj, domain);\n    }\n\n    async function fetchBySaveQuery() {\n        const domain = await fetchStrapiBaseUrl();\n        const queryDetails = JSON.parse(decodeURI(saveQueryDetails));\n        const filteredContent = await filterContentByQuery(contentName, colLabelName, queryDetails.searchTerm);\n        const template = await getTemplateById(queryDetails.templateId);\n        const finalHtml = filteredContent.map(content => {\n            updateImgUrl(content, domain);\n            return velocityjs.render(template.contentShape, { content: content });\n        });\n        if (finalHtml.length) {\n            setHtmlCode(finalHtml);\n        } else {\n            console.error('App.js: No Content Found');\n        }\n    }\n\n    function mappingOfDataWithTemplate(getTemplateData, getContentsData, cid_tid_obj, domain) {\n        if (getTemplateData && getContentsData && Object.keys(cid_tid_obj).length) {\n            const finalTemplate = cid_tid_obj.map(contentIdAndTemplateId => {\n                const filterContent = getContentsData.filter(content => content.id === contentIdAndTemplateId.contentId);\n                const filterTemplate = getTemplateData.filter(template => +template.id === +contentIdAndTemplateId.templateId);\n                // To bind domain with image src(url).\n                if (filterTemplate.length && filterContent[0] && Object.keys(filterContent[0]).length) {\n                    updateImgUrl(filterContent[0], domain);\n                    return velocityjs.render(filterTemplate[0].contentShape, { content: filterContent[0] });\n                }\n                return \"\";\n            });\n            setHtmlCode(finalTemplate);\n        }\n    }\n\n    function updateImgUrl(content, domain) {\n        Object.keys(content).map((key, i) => {\n            if (content[key] && Array.isArray(content[key])) {\n                // For MultiMedia\n                if (content[key] && content[key][0] && content[key][0]['ext']) {\n                    content[key].map(el => {\n                        return el.url = domain + el.url;\n                    });\n                }\n            } else if (content[key] && typeof content[key] === 'object') {\n                // For SingleMedia\n                if (content[key] && content[key]['ext']) {\n                    if (typeof content[key] === 'object') {\n                        content[key].url = domain + content[key].url;\n                    }\n                }\n            }\n        });\n    }\n    if(localStorage.getItem(STRAPI_BASE_URL_KEY)) {\n        return (\n            <>\n                {\n                    htmlCode && htmlCode.length ?\n                        htmlCode.map((html, idx) => (\n                            <div key={idx} dangerouslySetInnerHTML={{\n                                __html: html\n                            }}>\n                            </div>\n                        ))\n                        : <h1>Loading...</h1>\n                }\n            </>\n        );\n    } else {\n        return <StrapiConfigWarning />\n    }\n}\n\nexport default App;\n","import ReactDOM from \"react-dom\"\nimport React from \"react\"\nimport App from '../App'\nimport { checkIfUrlExists, getStrapiConfigurations } from \"../api/Api\";\nimport { STRAPI_BASE_URL_KEY } from \"../helper/Constant\";\n\nconst ATTRIBUTES = {\n    contentName: \"contentName\",\n    contentIdsAndTemplateIds: \"contentIdsAndTemplateIds\",\n    saveQueryDetails: \"saveQueryDetails\",\n    colLabelName: \"colLabelName\"\n};\nclass WidgetElement extends HTMLElement {\n\n    static get observedAttributes() {\n        return Object.values(ATTRIBUTES);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (!Object.values(ATTRIBUTES).includes(name)) {\n            throw new Error(`Untracked changed attribute: ${name}`);\n        }\n        if (this.mountPoint && newValue !== oldValue) {\n            this.getStrapiConfiguration();\n        }\n    }\n\n    connectedCallback() {\n        this.mountPoint = document.createElement('div');\n        this.appendChild(this.mountPoint);\n        this.getStrapiConfiguration();\n    }\n\n    render() {\n        const contentName = this.getAttribute(ATTRIBUTES.contentName);\n        const contentIdsAndTemplateIds = this.getAttribute(ATTRIBUTES.contentIdsAndTemplateIds);\n        const saveQueryDetails = this.getAttribute(ATTRIBUTES.saveQueryDetails);\n        const colLabelName = this.getAttribute(ATTRIBUTES.colLabelName);\n\n        ReactDOM.render(\n            <App\n                contentName={contentName}\n                contentIdsAndTemplateIds={contentIdsAndTemplateIds}\n                saveQueryDetails={saveQueryDetails}\n                colLabelName={colLabelName}\n            />,\n            this.mountPoint\n        );\n    }\n\n    /**\n     * Get strapi configurations\n     */\n     getStrapiConfiguration = async () => {\n        localStorage.removeItem(STRAPI_BASE_URL_KEY);\n        const { data, isError } = await getStrapiConfigurations();\n        if (!isError && data && data.data && data.data.baseUrl) {\n            const result = await checkIfUrlExists(data.data.baseUrl);\n            if (result && result.data && result.data.status === 200 && !result.isError) {\n                localStorage.setItem(STRAPI_BASE_URL_KEY, data.data.baseUrl);\n            }\n        }\n        this.render();\n    }\n}\n\ncustomElements.get('my-list-widget') || customElements.define('my-list-widget', WidgetElement);\n\nexport default WidgetElement;\n\n"],"sourceRoot":""}